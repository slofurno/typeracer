defmodule Typeracer.Text do
  def start_link do
    text = ["But when a man s pulse is healthy and temperate and when before going to sleep he has awakened his rational powers and fed them on noble thoughts and enquiries collecting himself in meditation after having first indulged his appetites neither too much nor too little but just enough to lay them to sleep and prevent them and their enjoyments and pains from interfering with the higher principle which he leaves in the solitude of pure abstraction free to contemplate and aspire to the knowledge of the unknown whether in past present or future when again he has allayed the passionate element if he has a quarrel against any one I say when after pacifying the two irrational principles he rouses up the third which is reason before he takes his rest then as you know he attains truth most nearly and is least likely to be the sport of fantastic and lawless visions","Those then who know not wisdom and virtue and are always busy with gluttony and sensuality go down and up again as far as the mean and in this region they move at random throughout life but they never pass into the true upper world thither they neither look nor do they ever find their way neither are they truly filled with true being nor do they taste of pure and abiding pleasure Like cattle with their eyes always looking down and their heads stooping to the earth that is to the dining table they fatten and feed and breed and in their excessive love of these delights they kick and butt at one another with horns and hoofs which are made of iron and they kill one another by reason of their insatiable lust For they fill themselves with that which is not substantial and the part of themselves which they fill is also unsubstantial and incontinent","And so when we hear persons saying that the tragedians and Homer who is at their head know all the arts and all things human virtue as well as vice and divine things too for that the good poet cannot compose well unless he knows his subject and that he who has not this knowledge can never be a poet we ought to consider whether here also there may not be a similar illusion Perhaps they may have come across imitators and been deceived by them they may not have remembered when they saw their works that these were but imitations thrice removed from the truth and could easily be made without any knowledge of the truth because they are appearances only and not realities Or after all they may be in the right and poets do really know the things about which they seem to the many to speak so well","And now we may fairly take him and place him by the side of the painter for he is like him in two ways first inasmuch as his creations have an inferior degree of truth in this I say he is like him and he is also like him in being concerned with an inferior part of the soul and therefore we shall be right in refusing to admit him into a well ordered State because he awakens and nourishes and strengthens the feelings and impairs the reason As in a city when the evil are permitted to have authority and the good are put out of the way so in the soul of man as we maintain the imitative poet implants an evil constitution for he indulges the irrational nature which has no discernment of greater and less but thinks the same thing at one time great and at another small he is a manufacturer of images and is very far removed from the truth","Creating the works from public domain print editions means that no one owns a United States copyright in these works so the Foundation and you can copy and distribute it in the United States without permission and without paying copyright royalties Special rules set forth in the General Terms of Use part of this license apply to copying and distributing Project Gutenberg tm electronic works to protect the PROJECT GUTENBERG tm concept and trademark Project Gutenberg is a registered trademark and may not be used if you charge for the eBooks unless you receive specific permission If you do not charge anything for copies of this eBook complying with the rules is very easy You may use this eBook for nearly any purpose such as creation of derivative works reports performances and research They may be modified and printed and given away you may do practically ANYTHING with public domain eBooks Redistribution is subject to the trademark license especially commercial redistribution"]
    Agent.start_link(fn -> text end, name: __MODULE__)
  end

  def get(i) do
    Agent.get(__MODULE__, &Enum.at(&1, i))
  end

  def get_random do
    Agent.get(__MODULE__, fn x ->
      i = Enum.count(x) |> :random.uniform
      Enum.at(x, i - 1)
    end)
  end

end
